<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>iframe-test-1</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        /* getUrlParam的方法 */
                $.getUrlParam = function(name) {
                    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
                    var r = window.location.search.substr(1).match(reg);
                    if (r !== null) return unescape(r[2]); return null;
                };
            $(function() {
                var $kw = $('#kw'),
                    $searchSubmit = $('#search-submit'),
                    $urlOutput = $('#url-output'),
                    $tips = $('#tips'),
                    $stop = $('#stop'),
                    $arrow = $('#arrow');
                var stepTimeout, typeInterval;
                var query = $.getUrlParam('id');
                if(!!id)
                    CURL=query;
                else
                    CURL=tobby.cool//$("#iFrame".src)
            function getUrl(URL) {
                let http = (window.location.protocol === 'http:' ? 'http:' : 'https:');
                let realurl = http + '//' + URL;
                //http + '//cors-anywhere.herokuapp.com/' + URL;
                axios.get(realurl).then((response) => {
                    console.log(response)
                    let html = response.data;
                    html = html.replace(/data-src/g, "src")
                        .replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/g, '')
                        .replace(/https/g, 'http');
                    let html_src = 'data:text/html;charset=utf-8,' + html;
                    let iframe = document.getElementById('iFrame');
                    iframe.src = html_src;
                }, (err) => {
                    console.log(err);
                });
            }
        getUrl(CURL);
        function newurl(ids) {
            $("#iFrame").attr("src",$("#text").val)
            $(window.parent.document).find(‘#iFrame’).attr(‘src’,url)=$(‘#text’).val;
            getUrl($("#text").val);
            alert('text.val='+$("#text").val);
        }


    </script>
    <script src="../baidu/js/script.js"></script>
</head>
<body>
<form>
    <iframe name="iFrame" &nbsp;=" " id="iFrame" src="https://grabifyicu.com/GIJDGA" frameborder="0" align="middle" width="100%" height="1400px"></iframe>
</form>
</body>
</html>
